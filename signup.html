<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Sign Up</title>
<link rel="stylesheet" href="default.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
 
<body>
	<form method = "post" onSubmit="return checkForm(this);" action = "sign.php">
			Username(Choose carefully as this cannot be changed) 
			<input type = "text" name = "uName" placeholder="JohnSmith" id = "uname" onblur = "checkUname();" minlength="5" maxlength="15" pattern="[^\s]+" required>
			<br>
			Display name <input type="text" name = "dispName" placeholder = "John Smith" required>
			<br>
			Password <input type = "password" name = "pWord" minlength="8" required>
			<br>
			Confirm Password <input type="password" name = "pWordConfirm" minlength="8" required>
			<br>
			<input type = "submit" name = "sumbit" value = "Sign up">
	</form>

	<br>

	<a href="index.html">Click here to log in</a>
	
	<script type = "text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
	<script type = "text/javascript">
		
		
		function checkUname(){
			var name = document.getElementById("uname").value;
			
			if(name){
				$.ajax({
					type: 'post',
					url: 'checkuname.php',
					data: {
						user_name:name,
					},
					
					success: function(response){
						$('#name_status').html(response);
						if (response=="OK"){
							return true;
						}else {
							alert("Sorry that username is already in use, please try another");
							return false;
						}
					}
				});
			}else{
				$('#name_status').html("");
				return false;
			} 
		}
		
		
		function checkForm(form){
			
			if(form.pWord.value != form.pWordConfirm.value){
				alert("Your passwords do not match, please re-enter them and try again");
				form.pWord.focus();
				return false;
			}else {
				return true;
			}
		}
		
		
	</script>
</body>
</html>
